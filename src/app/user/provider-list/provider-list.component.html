<div class="container-fluid p-3 d-flex flex-column align-items-center gap-3">
  <div class="container px-3">
    <h1 class="fw-bold text-primary text-center mb-4 text-uppercase">
      List of TVET PROVIDERS and assessment centers
    </h1>
  </div>

  @for (item of provider$ | async; track $index) {
  <div
    class="card shadow-sm w-100 border-0"
    style="max-width: 100%; width: 100%"
  >
    <div class="card-body">
      <!-- Provider Header -->
      <div
        class="d-flex flex-column flex-md-row align-items-start mb-4 border-bottom pb-3 gap-3"
      >
        <div>
          <div
            *ngIf="!item.provider.file"
            class="bg-light rounded-circle border d-flex align-items-center justify-content-center text-muted"
            style="width: 80px; height: 80px"
          >
            <i class="bi bi-building fs-3"></i>
          </div>
        </div>

        <div>
          <h4 class="card-title mb-1">{{ item.provider.name }}</h4>
          <p class="text-muted mb-0">
            {{ item.provider.address }}, {{ item.provider.province }},
            {{ item.provider.region }}
          </p>
        </div>
      </div>

      <!-- Provider Info Grid -->
      <div class="row mb-4">
        <div class="col-12 col-md-4 mb-2">
          <small class="text-uppercase text-muted d-block">Email</small>
          <span>{{ item.provider.email || "—" }}</span>
        </div>
        <div class="col-12 col-md-4 mb-2">
          <small class="text-uppercase text-muted d-block"
            >Contact Number</small
          >
          <span>{{ item.provider.contactNumber || "—" }}</span>
        </div>
        <div class="col-12 col-md-4 mb-2" *ngIf="item.provider.location">
          <small class="text-uppercase text-muted d-block">Coordinates</small>
          <span>
            {{ item.provider.location.latitude }},
            {{ item.provider.location.longitude }}
          </span>
        </div>
      </div>

      <!-- Two-column section -->
      <div
        class="d-grid gap-4"
        style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr))"
      >
        <!-- Registered Training Programs -->
        <div>
          <h5 class="mb-3 text-primary fw-semibold">
            Registered Training Programs
          </h5>
          <div
            class="mb-3"
            *ngFor="let service of getRegisteredPrograms(item.services)"
          >
            <div
              class="d-grid"
              style="grid-template-columns: auto 1fr; width: 100%"
            >
              <span
                class="text-muted"
                style="font-size: 1.2em; line-height: 1; align-self: start"
                >•</span
              >
              <small
                class="text-muted ms-2"
                style="word-break: break-word; white-space: normal"
              >
                {{ service }}
              </small>
            </div>
          </div>
        </div>

        <!-- AC Accredited Qualifications -->
        <div>
          <h5 class="mb-3 text-primary fw-semibold">
            AC Accredited Qualifications
          </h5>
          <div
            class="mb-3"
            *ngFor="let service of getAccreditedQualifications(item.services)"
          >
            <div
              class="d-grid"
              style="grid-template-columns: auto 1fr; width: 100%"
            >
              <span
                class="text-muted"
                style="font-size: 1.2em; line-height: 1; align-self: start"
                >•</span
              >
              <small
                class="text-muted ms-2"
                style="word-break: break-word; white-space: normal"
              >
                {{ service }}
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  }
</div>
