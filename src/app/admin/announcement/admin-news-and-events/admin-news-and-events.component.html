<!-- Navbar -->
<nav class="navbar navbar-dark bg-primary mb-3">
  <div class="container-fluid">
    <a class="navbar-brand text-white">News and Events</a>
    <form
      class="d-flex align-items-center"
      role="search"
      (submit)="$event.preventDefault()"
    >
      <input
        class="form-control me-2"
        type="search"
        placeholder="Search"
        aria-label="Search"
        [formControl]="searchControl"
      />
      <button
        class="btn btn-success d-flex gap-2"
        type="button"
        (click)="create()"
      >
        <i class="bi bi-plus"></i> New
      </button>
    </form>
  </div>
</nav>

<!-- Announcement Table -->
<div class="container p-3">
  <div class="bg-white rounded-3 p-3 w-100 shadow-sm">
    <ng-container *ngIf="announcements$ | async as announcements; else loading">
      <table class="table table-hover table-borderless align-middle">
        <thead class="table-light">
          <tr>
            <th scope="col">Title</th>
            <th scope="col">Type</th>
            <th scope="col">Created</th>
            <th scope="col" class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let a of announcements$ | async; let i = index">
            <!-- Title: larger font, ellipsis -->
            <td class="fw-bold text-truncate">
              <div class="d-flex align-items-center">
                <img
                  [src]="a.image"
                  [alt]="a.title"
                  width="60"
                  class="me-3 rounded"
                />
                <div class="flex-grow-1 text-truncate fw-semibold">
                  {{ a.title }}
                </div>
              </div>
            </td>

            <!-- Summary: slightly smaller, ellipsis -->
            <td class="text-muted text-truncate">
              <span class="fs-6">{{ a.type }}</span>
            </td>

            <!-- Created date: right-aligned, nowrap -->
            <td class="text-nowrap" style="white-space: nowrap">
              {{ a.createdAt | date : "shortDate" }}
            </td>

            <!-- Actions -->
            <td class="text-end">
              <button
                class="btn btn-sm btn-outline-primary me-2"
                [routerLink]="[a.id]"
              >
                <i class="bi bi-eye"></i>
              </button>
              <button
                class="btn btn-sm btn-outline-success me-2"
                (click)="create(a.id)"
              >
                <i class="bi bi-pencil"></i>
              </button>
              <button
                class="btn btn-sm btn-outline-danger"
                (click)="onDelete(a)"
              >
                <i class="bi bi-trash"></i>
              </button>
            </td>
          </tr>
          <tr *ngIf="announcements.length === 0">
            <td colspan="6" class="text-center text-muted py-4">
              <i class="bi bi-info-circle"></i> No news and events found.
            </td>
          </tr>
        </tbody>
      </table>
    </ng-container>

    <ng-template #loading>
      <div class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-3 text-muted">Loading news and events...</p>
      </div>
    </ng-template>
  </div>
</div>
