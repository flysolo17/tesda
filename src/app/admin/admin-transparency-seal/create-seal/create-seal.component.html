<nav class="navbar navbar-dark bg-primary">
  <div class="container-fluid">
    <span class="navbar-brand mb-0 h1">
      <button class="btn btn-light me-2" (click)="back()">
        <i class="bi bi-arrow-left"></i>
      </button>
      {{
        id === null ? "Create Transparency Seal" : "Update Transparency Seal"
      }}
    </span>
  </div>
</nav>

<div class="container my-4">
  <form [formGroup]="transparencyForm" (submit)="submit()">
    <!-- Title -->
    <div class="form-floating mb-3">
      <input
        type="text"
        class="form-control"
        id="title"
        placeholder="Title"
        formControlName="title"
        [ngClass]="{
          'is-invalid':
            transparencyForm.get('title')?.invalid &&
            transparencyForm.get('title')?.touched
        }"
      />
      <label for="title">Title</label>
      <div class="invalid-feedback">Title is required.</div>
    </div>

    <!-- Links -->
    <div formArrayName="links">
      <div
        *ngFor="let link of links.controls; let i = index"
        [formGroupName]="i"
        class="card mb-3 shadow-sm"
      >
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h6 class="mb-0">Quick Link {{ i + 1 }}</h6>
            <button
              type="button"
              class="btn btn-outline-danger btn-sm"
              (click)="removeLink(i)"
            >
              <i class="bi bi-trash"></i>
            </button>
          </div>

          <div class="form-floating mb-3">
            <input
              type="text"
              class="form-control"
              id="label-{{ i }}"
              placeholder="Label"
              formControlName="label"
              [ngClass]="{
                'is-invalid':
                  link.get('label')?.invalid && link.get('label')?.touched
              }"
            />
            <label for="label-{{ i }}">Label</label>
            <div class="invalid-feedback">Label is required.</div>
          </div>

          <div class="form-floating mb-3">
            <input
              type="url"
              class="form-control"
              id="link-{{ i }}"
              placeholder="Link"
              formControlName="link"
            />
            <label for="link-{{ i }}">Link (optional)</label>
          </div>
        </div>
      </div>

      <button
        type="button"
        class="btn btn-outline-primary w-100"
        (click)="addLink()"
      >
        <i class="bi bi-plus-circle me-1"></i> Add Quick Link
      </button>
    </div>

    <hr class="my-4" />

    <!-- Submit -->
    <button
      type="submit"
      class="btn btn-primary w-100"
      [disabled]="transparencyForm.invalid"
    >
      {{ id === null ? "Create" : "Update" }} Transparency Seal
    </button>
  </form>
</div>
