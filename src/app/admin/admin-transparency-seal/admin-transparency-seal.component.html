<!-- Navbar -->
<nav class="navbar navbar-dark bg-primary mb-3">
  <div class="container-fluid">
    <a class="navbar-brand">Transparency Seal</a>
    <form class="d-flex" role="search" (submit)="$event.preventDefault()">
      <input
        class="form-control me-2"
        type="search"
        placeholder="Search"
        aria-label="Search"
        formControlName="search"
      />

      <button
        class="btn btn-success d-flex gap-2"
        type="button"
        [routerLink]="['/administration/main/create-seal']"
      >
        <i class="bi bi-plus"></i>
        New
      </button>
    </form>
  </div>
</nav>

<div class="card shadow-sm border-0">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-primary">
          <tr>
            <th>#</th>
            <th>Title</th>
            <th>Quick Links</th>
            <th>Created</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of transparencySeal$ | async; let i = index">
            <td>{{ i + 1 }}</td>
            <td class="fw-semibold">{{ item.title }}</td>
            <td>
              <ng-container *ngIf="item.quickLinks.length > 0; else noLinks">
                <div
                  class="d-flex flex-wrap overflow-auto"
                  style="max-width: 300px; white-space: nowrap"
                >
                  <ng-container
                    *ngFor="let link of item.quickLinks; let last = last"
                  >
                    <ng-container *ngIf="link.link; else plainLabel">
                      <a
                        [href]="link.link"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-decoration-none text-primary me-1"
                      >
                        <i class="bi bi-link-45deg"></i> {{ link.label }}
                      </a>
                    </ng-container>
                    <ng-template #plainLabel>
                      <span class="text-body me-1">{{ link.label }}</span>
                    </ng-template>
                    <span *ngIf="!last">, </span>
                  </ng-container>
                </div>
              </ng-container>

              <ng-template #noLinks>
                <span class="text-muted fst-italic">No links</span>
              </ng-template>
            </td>
            <td>
              {{ item.createdAt | date : "mediumDate" }}
            </td>
            <td class="text-end">
              <div class="btn-group">
                <button
                  class="btn btn-sm btn-outline-primary"
                  title="Edit"
                  [routerLink]="['/administration/main/create-seal']"
                  [queryParams]="{ id: item.id }"
                >
                  <i class="bi bi-pencil-square"></i>
                </button>
                <button
                  class="btn btn-sm btn-outline-danger"
                  title="Delete"
                  (click)="delete(item.id)"
                >
                  <i class="bi bi-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
