<nav class="navbar navbar-dark bg-primary">
  <div class="container-fluid">
    <a class="navbar-brand">Appointments</a>
    <div class="d-flex gap-3" role="search">
      <button class="btn btn-success">Create Schedule</button>
    </div>
  </div>
</nav>

<div class="container-fluid m-3">
  <div class="card">
    <div class="card-header">
      <ul ngbNav #nav="ngbNav" class="nav-tabs">
        @for (item of status$; track $index) {
        <li ngbNavItem>
          <button ngbNavLink>{{ item }}</button>
          <ng-template ngbNavContent>
            <div class="table-responsive">
              <table class="table table-hover align-middle">
                <thead class="table-light">
                  <tr>
                    <th scope="col">Client</th>
                    <th scope="col">Contact</th>
                    <th scope="col">Service</th>
                    <th scope="col">Date</th>
                    <th scope="col">Time</th>
                    <th scope="col">Location</th>

                    <th scope="col">Created</th>
                    <th scope="col">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let appt of appointments$ | async; let i = index">
                    <td>
                      <strong>{{ appt.personalInformation.name }}</strong
                      ><br />
                      <small class="text-muted">{{
                        appt.personalInformation.email
                      }}</small>
                    </td>
                    <td>{{ appt.personalInformation.contact }}</td>
                    <td>
                      {{ appt.serviceInformation.name }}
                    </td>
                    <td>{{ appt.date }}</td>
                    <td>{{ appt.time }}</td>
                    <td>{{ appt.location }}</td>

                    <td>
                      <small class="text-muted">{{
                        appt.createdAt | date : "short"
                      }}</small>
                    </td>
                    <td>
                      <div class="dropdown">
                        <button
                          class="btn btn-sm btn-outline-dark dropdown-toggle"
                          type="button"
                          data-bs-toggle="dropdown"
                          aria-expanded="false"
                        >
                          Actions
                        </button>
                        <ul class="dropdown-menu">
                          <li>
                            <button class="dropdown-item">View Details</button>
                          </li>
                          <li>
                            <button
                              class="dropdown-item"
                              [disabled]="appt.status !== 'PENDING'"
                            >
                              Confirm
                            </button>
                          </li>
                          <li>
                            <button
                              class="dropdown-item"
                              [disabled]="appt.status === 'CANCELLED'"
                            >
                              Cancel
                            </button>
                          </li>
                          <li>
                            <button
                              class="dropdown-item"
                              [disabled]="appt.status !== 'CONFIRMED'"
                            >
                              Complete
                            </button>
                          </li>
                        </ul>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </ng-template>
        </li>
        }
      </ul>
    </div>
    <div class="card-body">
      <div [ngbNavOutlet]="nav"></div>
    </div>
  </div>
</div>

<div class="container-fluid m-3">
  <div class="card">
    <div class="card-header d-flex align-items-center justify-content-between">
      <h4 class="card-title">Schedules</h4>
      <button class="btn btn-primary">
        <i class="bi bi-plus"></i>
        New
      </button>
    </div>
    <div class="card-body">
      <full-calendar [options]="calendarOptions"></full-calendar>
    </div>
  </div>
</div>
