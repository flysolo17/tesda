<nav class="navbar navbar-dark bg-primary shadow-sm mb-3">
  <div
    class="container-fluid d-flex justify-content-between align-items-center"
  >
    <span class="navbar-brand mb-0 h5 text-white fw-semibold"
      >PhilGEPS Postings</span
    >

    <div class="d-flex align-items-center gap-2">
      <input
        class="form-control me-2"
        type="search"
        placeholder="Search"
        aria-label="Search"
        name="search"
        [formControl]="searchTerm"
      />

      <button
        class="btn btn-success d-flex align-items-center gap-2"
        type="button"
        (click)="create()"
      >
        <i class="bi bi-plus-square"></i>
        Create
      </button>
    </div>
  </div>
</nav>

<div class="table-responsive shadow-sm rounded-3 overflow-hidden">
  <table class="table table-striped table-hover align-middle mb-0">
    <thead class="table-light">
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Cost</th>
        <th scope="col">Details</th>
        <th scope="col">File</th>
        <th scope="col">Date</th>
        <th scope="col">Updated At</th>
        <th scope="col" class="text-center">Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let post of postings$ | async; let i = index">
        <td class="fw-bold">{{ post.philgeps.title }}</td>
        <td>
          {{ post.philgeps.cost | currency : "PHP" : "symbol" : "1.2-2" }}
        </td>
        <td>
          <span
            class="text-truncate d-inline-block"
            style="max-width: 200px"
            title="{{ post.philgeps.details }}"
          >
            {{ post.philgeps.details }}
          </span>
        </td>
        <td>
          <div *ngFor="let link of post.attachments" class="mb-2">
            <ng-container *ngIf="link?.file; else plainLabel">
              <a
                [href]="link.file"
                target="_blank"
                rel="noopener noreferrer"
                class="text-decoration-none text-primary"
              >
                <i class="bi bi-link-45deg me-1"></i>{{ link.title }}
              </a>
            </ng-container>
            <ng-template #plainLabel>
              <span class="text-body">{{ link?.file }}</span>
            </ng-template>
          </div>
        </td>
        <td>{{ post.philgeps.date }}</td>
        <td>{{ post.philgeps.updatedAt | date : "short" }}</td>
        <td class="text-center">
          <button
            class="btn btn-sm btn-outline-primary me-1"
            (click)="create(post.philgeps.id)"
            title="Edit Posting"
          >
            <i class="bi bi-pencil"></i>
          </button>
          <button
            class="btn btn-sm btn-outline-danger"
            (click)="delete(post.philgeps)"
            title="Delete Posting"
          >
            <i class="bi bi-trash"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
