<nav class="navbar navbar-dark bg-primary shadow-sm mb-3">
  <div
    class="container-fluid d-flex justify-content-between align-items-center"
  >
    <span class="navbar-brand mb-0 h5 text-white fw-semibold"
      >PhilGEPS Postings</span
    >

    <div class="d-flex align-items-center gap-2">
      <input
        class="form-control me-2"
        type="search"
        placeholder="Search"
        aria-label="Search"
        name="search"
        [formControl]="searchTerm"
      />

      <button
        class="btn btn-success d-flex align-items-center gap-2"
        type="button"
        (click)="create()"
      >
        <i class="bi bi-plus-square"></i>
        Create
      </button>
    </div>
  </div>
</nav>

<div class="table-responsive shadow-sm rounded-3 overflow-hidden">
  <table class="table table-striped table-hover align-middle mb-0">
    <thead class="table-light">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Title</th>
        <th scope="col">Cost</th>
        <th scope="col">Details</th>
        <th scope="col">File</th>
        <th scope="col">Date</th>
        <th scope="col">Updated At</th>
        <th scope="col" class="text-center">Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let post of filteredPostings; let i = index">
        <td>{{ i + 1 + (page - 1) * pageSize }}</td>
        <td class="fw-bold">{{ post.title }}</td>
        <td>{{ post.cost | currency : "PHP" : "symbol" : "1.2-2" }}</td>
        <td>
          <span
            class="text-truncate d-inline-block"
            style="max-width: 200px"
            title="{{ post.details }}"
          >
            {{ post.details }}
          </span>
        </td>
        <td>
          <ng-container *ngIf="post.attachment; else noAttachment">
            <a
              [href]="post.attachment"
              target="_blank"
              class="text-decoration-none text-primary"
            >
              <i class="bi bi-file-earmark-text"></i>
            </a>
          </ng-container>
          <ng-template #noAttachment>
            <span class="text-muted">None</span>
          </ng-template>
        </td>
        <td>{{ post.date }}</td>
        <td>{{ post.updatedAt | date : "short" }}</td>
        <td class="text-center">
          <button
            class="btn btn-sm btn-outline-primary me-1"
            (click)="edit(post)"
            title="Edit Posting"
          >
            <i class="bi bi-pencil"></i>
          </button>
          <button
            class="btn btn-sm btn-outline-danger"
            (click)="delete(post)"
            title="Delete Posting"
          >
            <i class="bi bi-trash"></i>
          </button>
        </td>
      </tr>

      <tr *ngIf="filteredPostings.length === 0">
        <td colspan="8" class="text-center text-muted py-4">
          No postings found.
        </td>
      </tr>
    </tbody>
  </table>
</div>
