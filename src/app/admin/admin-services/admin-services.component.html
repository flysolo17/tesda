<!-- Navbar / Header -->
<nav class="navbar navbar-dark bg-primary mb-4">
  <div class="container-fluid">
    <span class="navbar-brand mb-0 h1">Services</span>
    <div class="d-flex align-items-center gap-2">
      <input
        type="text"
        class="form-control"
        placeholder="Search services..."
        [formControl]="searchControl"
        aria-label="Search"
      />
      <button
        class="btn btn-success d-flex align-items-center gap-1"
        type="button"
        (click)="new()"
      >
        <i class="bi bi-plus-lg"></i>
        New
      </button>
    </div>
  </div>
</nav>

<!-- Services Table -->
<div class="table-responsive shadow-sm rounded-3 overflow-hidden m-4">
  <table class="table table-striped table-hover align-middle">
    <thead class="table-light">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Title</th>
        <th scope="col">Type</th>
        <th scope="col">Qualification</th>
        <th scope="col">Updated At</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let service of services$ | async; let i = index">
        <td>{{ i + 1 }}</td>
        <td>
          <span class="ellipsis">{{ service.title }}</span>
        </td>
        <td>
          <span class="ellipsis">{{ service.type }}</span>
        </td>
        <td>
          <span class="ellipsis">{{ service.qualification }}</span>
        </td>
        <td>{{ service.updatedAt | date : "short" }}</td>
        <td>
          <button
            class="btn btn-sm btn-outline-primary me-2"
            (click)="editService(service)"
          >
            <i class="bi bi-pencil"></i>
          </button>
          <button
            class="btn btn-sm btn-outline-danger"
            (click)="deleteService(service.id)"
          >
            <i class="bi bi-trash"></i>
          </button>
        </td>
      </tr>
      <tr *ngIf="(services$ | async)?.length === 0 && !isLoading">
        <td colspan="6" class="text-center text-muted">No services found.</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Loading Spinner -->
<div *ngIf="isLoading" class="d-flex justify-content-center my-4">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
