<section
  class="position-relative bg-primary text-white text-center overflow-hidden"
  style="min-height: 360px"
>
  <!-- Background Image -->
  <div class="position-absolute top-0 start-0 w-100 h-100 overflow-hidden">
    <img
      src="../../../../assets/images/tesda-hero-bg.webp"
      alt="TESDA Hero Background"
      class="w-100 h-100 object-fit-cover"
    />

    <!-- Dark Overlay -->
    <div
      class="position-absolute top-0 start-0 w-100 h-100"
      style="background: rgba(0, 0, 0, 0.4)"
    ></div>

    <!-- Gradient Overlay -->
    <div
      class="position-absolute top-0 start-0 w-100 h-100"
      style="
        background: linear-gradient(
          to right,
          #1e3a8a 0%,
          transparent 50%,
          #1d4ed8 100%
        );
        opacity: 0.3;
        mix-blend-mode: multiply;
      "
    ></div>
  </div>

  <!-- Content -->
  <div
    class="position-relative z-1 container py-5 d-flex flex-column flex-md-row align-items-center justify-content-center gap-4"
  >
    <!-- Text Column -->
    <div class="text-center text-md-start">
      <h1 class="fw-bold display-5">Welcome to TESDA Occidental Mindoro</h1>
      <p class="mt-3 fs-5 mx-auto mx-md-0" style="max-width: 500px">
        Empowering lives through quality technical education and training
        programs.
      </p>
      <!-- Get Started Button with Modal Trigger -->
      <a
        href="#"
        class="btn btn-success btn-lg px-4 py-2 mt-4 fw-semibold shadow-sm"
        style="transition: transform 0.3s ease"
        onmouseover="this.style.transform='translateY(-4px)'"
        onmouseout="this.style.transform='translateY(0)'"
        data-bs-toggle="modal"
        data-bs-target="#registerModal"
      >
        Get Started
      </a>
    </div>

    <div class="mt-4 mt-md-0 ms-md-4 flex-shrink-0">
      <img
        src="../../../../assets/images/white logo.webp"
        alt="TESDA Logo"
        class="img-fluid"
        style="width: 320px; height: 320px; object-fit: contain"
      />
    </div>
  </div>
</section>
<!-- Registration Modal -->
<div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="registerModalLabel">Registration Required</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        You need to register first before accessing this feature.
      </div>
      <div class="modal-footer">
        <!-- Angular Register Button -->
        <div *ngIf="!user" class="d-flex mt-2 mt-lg-0 gap-2" role="login">
          <button
            class="btn btn-outline-light btn-sm px-3"
            (click)="registerClicked()"
          >
            <i class="fa-solid fa-user-plus me-1"></i> Register
          </button>
        </div>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS (required for modal) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<section class="carousel" style="height: 400px; margin: 3rem">
  <div
    id="carouselExample"
    class="carousel slide carousel-fade"
    data-bs-ride="carousel"
    data-bs-interval="3000"
  >
    <div class="carousel-inner">
      @for (item of banners$ | async; track $index) {
      <div class="carousel-item" [class.active]="$index === 0">
        <img
          [src]="item.url"
          class="d-block w-100 rounded-3"
          alt="Banner image"
          height="400"
          width="100%"
          style="object-fit: cover; transition: transform 1s ease-in-out"
        />
      </div>
      }
    </div>

    <!-- Carousel controls -->
    <button
      class="carousel-control-prev"
      type="button"
      data-bs-target="#carouselExample"
      data-bs-slide="prev"
    >
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>

    <button
      class="carousel-control-next"
      type="button"
      data-bs-target="#carouselExample"
      data-bs-slide="next"
    >
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>

    <!-- Indicators -->
    <div class="carousel-indicators">
      @for (item of banners$ | async; track $index) {
      <button
        type="button"
        data-bs-target="#carouselExample"
        [attr.data-bs-slide-to]="$index"
        [class.active]="$index === 0"
        [attr.aria-current]="$index === 0 ? 'true' : null"
        [attr.aria-label]="'Slide ' + ($index + 1)"
        class="rounded-circle mx-1"
        style="width: 10px; height: 10px; background-color: #bbb; border: none"
        [style.background-color]="$index === 0 ? '#0d6efd' : '#bbb'"
      ></button>
      }
    </div>
  </div>
</section>
<!-- Programs & Services Section -->
<section class="py-5 bg-light">
  <div class="container">
    <h2
      class="fw-bold mb-5 text-center"
      style="font-size: 2.5rem; letter-spacing: -0.5px; line-height: 1.2"
    >
      <span
        style="
          background: linear-gradient(to right, #0d6efd, #198754, #ffc107);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          display: inline-block;
        "
      >
        Programs &amp; Services
      </span>
    </h2>

    <div class="d-flex flex-wrap align-items-center justify-content-center gap-4">
      <!-- Cards centered -->
      <div class="d-flex flex-wrap justify-content-center gap-4 flex-grow-1">
        <div
          class="col-md-4"
          *ngFor="let item of programs; let i = index"
          [ngClass]="{
            'animate-delay-0': i === 0,
            'animate-delay-1': i === 1,
            'animate-delay-2': i === 2
          }"
        >
          <div
            class="card border-0 shadow-sm p-4 text-center rounded-4 program-card"
          >
            <div
              class="icon-circle mx-auto mb-3 d-flex align-items-center justify-content-center bounce"
              [ngStyle]="{ 'background-color': item.bg }"
            >
              <i
                [class]="'bi ' + item.icon"
                [ngStyle]="{ color: item.color, fontSize: '2rem' }"
              ></i>
            </div>
            <h5 class="fw-semibold mb-2">{{ item.title }}</h5>
            <p class="text-muted mb-0">{{ item.desc }}</p>
          </div>
        </div>
      </div>

      <!-- See More Button aligned to the right -->
      <div class="d-flex align-items-center ms-3">
        <button
          class="btn btn-gradient btn-lg fw-semibold shadow-sm"
          [routerLink]="['/landing-page/services']"
          [queryParams]="{ type: 'All Services', page: 1, size: 10, search: '' }"
        >
          See More
        </button>
      </div>
    </div>
  </div>
</section>

<app-announcement-list></app-announcement-list>
<app-news-and-events></app-news-and-events>
<app-calendar></app-calendar>
<app-footer></app-footer>
